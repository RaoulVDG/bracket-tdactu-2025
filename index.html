<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Bracket Playoffs NFL ‚Äì Complet & Dynamique</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0b1320;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    .conference {
      margin-bottom: 40px;
    }
    .round {
      margin-top: 20px;
    }
    .match {
      background: #1c2541;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
    }
    .team {
      flex: 1;
      margin: 0 5px;
      padding: 8px;
      text-align: center;
      background: #3a506b;
      border-radius: 8px;
      cursor: pointer;
    }
    .team.selected {
      background: #5bc0be;
      color: #000;
      font-weight: bold;
    }
    .team.disabled {
      opacity: 0.4;
      cursor: default;
    }
  </style>
</head>
<body>

<h1>üèà Bracket Playoffs NFL</h1>

<div id="app"></div>

<script>
/*
  STRUCTURE
  - Seeds 1 √† 7 par conf√©rence
  - Seed 1 = bye week
  - Reseeding automatique au Divisional Round
*/

const conferences = {
  AFC: {
    seeds: {
      1: 'Denver Broncos',
      2: 'Buffalo Bills',
      3: 'Kansas City Chiefs',
      4: 'Jacksonville Jaguars',
      5: 'Cleveland Browns',
      6: 'Miami Dolphins',
      7: 'Pittsburgh Steelers'
    }
  },
  NFC: {
    seeds: {
      1: 'Seattle Seahawks',
      2: 'San Francisco 49ers',
      3: 'Detroit Lions',
      4: 'Tampa Bay Buccaneers',
      5: 'Dallas Cowboys',
      6: 'Green Bay Packers',
      7: 'Los Angeles Rams'
    }
  }
};

const state = {
  AFC: { wild: {}, divisional: {}, final: null },
  NFC: { wild: {}, divisional: {}, final: null }
};

const app = document.getElementById('app');

function render() {
  app.innerHTML = '';
  Object.keys(conferences).forEach(conf => renderConference(conf));
}

function renderConference(conf) {
  const confDiv = document.createElement('div');
  confDiv.className = 'conference';

  const title = document.createElement('h2');
  title.innerText = conf;
  confDiv.appendChild(title);

  const seeds = conferences[conf].seeds;

  // Wild Card
  confDiv.appendChild(roundTitle('Wild Card'));
  const wildMatches = [
    [2,7], [3,6], [4,5]
  ];

  wildMatches.forEach(([a,b], idx) => {
    confDiv.appendChild(matchDiv(
      conf,
      'wild',
      idx,
      seeds[a],
      seeds[b]
    ));
  });

  // Divisional
  confDiv.appendChild(roundTitle('Divisional'));
  const divTeams = getDivisionalTeams(conf);

  if (divTeams.length === 4) {
    confDiv.appendChild(matchDiv(conf, 'divisional', 0, divTeams[0], divTeams[3]));
    confDiv.appendChild(matchDiv(conf, 'divisional', 1, divTeams[1], divTeams[2]));
  } else {
    confDiv.appendChild(infoDiv('En attente des r√©sultats du Wild Card'));
  }

  // Finale de conf√©rence
  confDiv.appendChild(roundTitle('Finale de conf√©rence'));
  if (state[conf].divisional[0] && state[conf].divisional[1]) {
    confDiv.appendChild(matchDiv(
      conf,
      'final',
      0,
      state[conf].divisional[0],
      state[conf].divisional[1]
    ));
  } else {
    confDiv.appendChild(infoDiv('En attente des r√©sultats du Divisional'));
  }

  app.appendChild(confDiv);
}

function roundTitle(text) {
  const h = document.createElement('h3');
  h.innerText = text;
  return h;
}

function infoDiv(text) {
  const d = document.createElement('div');
  d.style.opacity = '0.6';
  d.innerText = text;
  return d;
}

function matchDiv(conf, round, idx, teamA, teamB) {
  const div = document.createElement('div');
  div.className = 'match';

  [teamA, teamB].forEach(team => {
    const t = document.createElement('div');
    t.className = 'team';
    t.innerText = team;
    t.onclick = () => select(conf, round, idx, team);
    if (state[conf][round][idx] === team) t.classList.add('selected');
    div.appendChild(t);
  });

  return div;
}

function select(conf, round, idx, team) {
  state[conf][round][idx] = team;

  // reset rounds downstream
  if (round === 'wild') {
    state[conf].divisional = {};
    state[conf].final = null;
  }
  if (round === 'divisional') {
    state[conf].final = null;
  }

  render();
}

function getDivisionalTeams(conf) {
  const seeds = conferences[conf].seeds;
  const winners = Object.values(state[conf].wild);
  if (winners.length !== 3) return [];

  const allTeams = Object.entries(seeds)
    .map(([seed, name]) => ({ seed: Number(seed), name }));

  const seed1 = allTeams.find(t => t.seed === 1);

  const qualified = winners
    .map(name => allTeams.find(t => t.name === name));

  qualified.push(seed1);

  qualified.sort((a,b) => a.seed - b.seed);

  return qualified.map(t => t.name);
}

render();
</script>

</body>
</html>
